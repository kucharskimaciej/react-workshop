<!DOCTYPE html><html><head><meta charset="utf-8"><link href="bundle_020bed8ceba449b8a8ca38fbb9e1d22b.css" rel="stylesheet"></head><body><div class="reveal"><div class="slides"><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">React</h1></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Refresh the Javascript<small class="dm-slide__title__subtitle">That you will need for React</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Transform one array into another using map</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">const array = [1, 2, 3, 4, 5]

function squareNumber(num) {
    return num * num
}

const squared = array.map(squareNumber)

squared // [1, 4, 9, 16, 25]
array // [1, 2, 3, 4, 5]


const doubled = array.map(function(num) { return num * 2 }) // [2, 4, 6, 8, 10]


const books = [
    {
        name: &quot;JavaScript: The Definitive Guide&quot;,
        description: `Since 1996, JavaScript: The Definitive Guide...`,
        price: 28.89
    },
    {
        name: &quot;Eloquent JavaScript&quot;,
        description: `JavaScript lies at the heart...`,
        price: 21.22
    },
    {
        name: &quot;JavaScript: The Good Parts&quot;,
        description: `Most programming languages...`,
        price: 16.59
    }
]

const titles = books.map(function(book) {
    return book.name;
})

titles // [&quot;JavaScript: The Definitive Guide&quot;, &quot;Eloquent JavaScript&quot;, &quot;JavaScript: The Good Parts&quot;]

</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="3-5"><p>The <code>squareNumber</code> function takes in a number and returs its square</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="7"><p>With <code>map</code> the <code>squareNumber</code> will be called for each item in <code>array</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9"><p>Return values of <code>squareNumber</code> form a new array</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="10"><p>The original array remains unchanged</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13"><p>The function used in map can be inlined</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="16-32"><p>It works on objects, too; or any other value as long as it is in an array</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="34-36"><p>Map over the <code>books</code> array...</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="35"><p>...for every <code>book</code> return its <code>name</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="38"><p>The <code>titles</code> is an array of strings.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">.filter - Only take items that match some condition</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">const array = [1, 2, 3, 4, 5]

function biggerThan3(num) {
    return num &gt; 3;
}

const selectedNumbers = array.filter(biggerThan3)

selectedNumbers // [4, 5]
array // [1, 2, 3, 4, 5]

const books = [
    {
        name: &quot;JavaScript: The Definitive Guide&quot;,
        description: `Since 1996, JavaScript: The Definitive Guide...`,
        price: 28.89
    },
    {
        name: &quot;Eloquent JavaScript&quot;,
        description: `JavaScript lies at the heart...`,
        price: 21.22
    },
    {
        name: &quot;JavaScript: The Good Parts&quot;,
        description: `Most programming languages...`,
        price: 16.59
    }
]

const expensiveBooks = books.filter(function(book) {
    return book.price &gt; 20;
})

const titlesOfExpensiveBooks = books
    .filter(function(book) { return book.price &gt; 20 })
    .map(function(book) { return book.name });

titlesOfExpensiveBooks // [&quot;JavaScript: The Definitive Guide&quot;, &quot;Eloquent JavaScript&quot;]

</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="3-5"><p>The <code>biggerThan3</code> function takes in a number and returs true when it's bigger than 3</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="7"><p>With <code>filter</code> the <code>biggerThan3</code> will be called for each item in <code>array</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9"><p><code>selectedNumbers</code> is an array that contains all the numbers that the <code>biggerThan3</code> has returned <code>true</code> for.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="10"><p>The original array remains unchanged</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12-28"><p>Just like <code>map</code> it can be called on any array</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="30-32"><p>Filter the <code>books</code> array to create <code>expensiveBooks</code> array that only includes those with price greater than $20.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="34-36"><p><code>map</code> and <code>filter</code> can be chained</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="35"><p>Find all books that match the <code>book.price &gt; 20</code> condition...</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="36"><p>...only take their titles</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="38"><p><code>titlesOfExpensiveBooks</code> contains the names of books over $20</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Arrow functions</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">const square = (num) =&gt; {
    return num * num
}

const sqaure2 = num =&gt; num * num;

[1, 2, 3].map(x =&gt; x - 2)



</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-3"><p>It is just a new syntax for writing functions; drop the <code>function</code> keyword and add <code>=&gt;</code> (arrow) symbol.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5"><p>If the arrow function takes just one argument the parenthesis can be dropped</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5"><p>If it has just one line, the <code>return</code> keyword and brackets can be dropped</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1-5"><p>Functions <code>square</code> and <code>square2</code> are exactly the same</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="7"><p>It can be used in any context: eg. callback</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Arrow functions: about `this`</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">const user = {
    name: &#39;John&#39;,
    greeting() {
        console.log(this.name)
    },
    delayedGreeting() {
        setTimeout(function() {
            console.log(this.name)
        });
    }
}

user.greeting() // &quot;John&quot;
user.delayedGreeting() // error! `this` is undefined

user.delayedGreeting = function() {
    setTimeout(() =&gt; {
        console.log(this.name)
    })
}

user.delayedGreeting() // &quot;John&quot;</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-11"><p><code>this</code> is a tricky subject in JS. Take this simple object as an example</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13"><p><code>user.greeting()</code> returns <code>&quot;John&quot;</code>, as expected</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="14"><p>There's another function inside the <code>delayedGreeting</code>: the <code>setTimeout</code> callback.
That causes <code>this</code> to be undefined and results in an error.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="16-20"><p>Solution: use the arrow function syntax for the callback. It will bind the <code>this</code> to the user object.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Classes</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">class Shape {
    type = &#39;shape&#39;

    constructor(description) {
        this.description = description
    }

    draw() {
        console.log(`${this.type}: ${this.description}`)
    }

    dimensions() {
        console.log(&#39;None&#39;)
    }
}

const myShape = new Shape(&#39;random blob&#39;);
myShape.draw() // &#39;shape: random blob&#39;
myShape.dimensions() // &#39;None&#39;

class Circle extends Shape {
    type = &#39;circle&#39;

    constructor(description, radius) {
        super(description);
        this.radius = radius;
    }

    dimensions() {
        console.log(`Radius: ${this.radius}`)
    }
}

const circle = new Circle(&#39;Round!&#39;, 10);
circle.draw() // &#39;circle: Round!&#39;
circle.dimensions() // &#39;Radius: 10&#39;
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-15"><p>Class is a blueprint used to create an object. Objects created using a class are called that class' instances</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="2"><p>Classes can have properties</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4-6"><p>There is a special function called <code>constructor</code> that will be called everytime a new instance is created</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8-10"><p>Classes can define functions - called methods. Every instance will have access to methods.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9"><p><code>this</code> used in method refers to specific instance</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="17"><p>New instances are created using <code>new</code>. <code>myShape</code> is an instance of <code>Shape</code> class.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="18-19"><p>It has access to methods defined on class.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="21-32"><p>Classes can extend other classes. In this case <code>Circle</code> extends <code>Shape</code> class.
In other words: <code>Circle</code> is a type of <code>Shape</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="29-31"><p><code>Circle</code> overrides - defines its own - <code>dimensions</code> method. Same goes for <code>type</code> property.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="29-31"><p><code>Circle</code> defines its own <code>constructor</code>.
But since it <code>extends</code> another class it has to call <code>super</code> function first.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Intro to React<small class="dm-slide__title__subtitle">Get started with React and build your first component</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Jump right into react</h3><div class="dm-slide__content"><div class="dm-slide__content__column l-column-middle l-column-fit" style="min-width:undefined%;flex-basis:undefined%;"><div class="dm-fragment"><pre class="dm-code dm-code--block"><strong class="dm-code__filename">You'll need node version &gt;= 4</strong><code class="dm-code__editor hljs bash">> node -v
v6.9.5</code></pre></div><div class="fragment dm-fragment"><pre class="dm-code dm-code--block"><strong class="dm-code__filename">Install create-react-app package globally</strong><code class="dm-code__editor hljs bash">> npm install -g create-react-app</code></pre></div><div class="fragment dm-fragment"><pre class="dm-code dm-code--block"><strong class="dm-code__filename">Create a new app</strong><code class="dm-code__editor hljs bash">> create-react-app react-workshop
Creating a new React app...
Happy hacking!</code></pre></div><div class="fragment dm-fragment"><pre class="dm-code dm-code--block"><strong class="dm-code__filename">Start the application</strong><code class="dm-code__editor hljs bash">> npm start</code></pre></div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Quick look around the project</h3><div class="dm-slide__content"><div class="dm-slide__content__column l-column-middle" style="min-width:30%;flex-basis:30%;"><img src="75c947fbbfe7d5e36b5013da663419c2.png"></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="fragment dm-fragment"><h3><code>App.js</code></h3>
<p>The initial component. Note the capital 'A' in the name - this is by convention.
The <code>App</code> component is exported from the file using the <code>export default</code> statement at the bottom.</p>
</div><div class="fragment dm-fragment"><h3><code>index.js</code></h3>
<p>Imports the <code>App</code> component and bootstraps it to the <code>#root</code> element.
This will only happen to the main component of the application - all other components will be rendered (directly or indirectly) by <code>App</code>.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Just a function</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/App.js</strong><code class="dm-code__editor hljs javascript">import React from &#39;react&#39;

function App() {
    return (
        &lt;h1&gt;Hello DevMeetings!&lt;/h1&gt;
    )
}

export default App

</code></pre></div><div class="dm-slide__content__column l-column-fit" style="min-width:50%;flex-basis:50%;"><img class="l-island" src="10faf78bd6576ac1953df14025045c2d.png"><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Even though we are not using the <code>React</code> variable directly, it has to be included to use the JSX syntax</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3-7"><p>Most common React components are just simple functions that return some markup</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5">return JSX</div><div class="current-only fragment dm-code-focus" data-code-focus="9"><p>Make sure the function is exported from the file, so we can use it in other files.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Single product component</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:65%;flex-basis:65%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/App.js</strong><code class="dm-code__editor hljs javascript">function App() {
    const product = {
      name: &quot;JavaScript: The Definitive Guide&quot;,
      description: `Since 1996, JavaScript: The Definitive Guide...`,
      price: 28.89
    }

    return (
        &lt;section&gt;
            &lt;h1&gt;Hello DevMeetings!&lt;/h1&gt;

            &lt;div&gt;
                &lt;header&gt;{ product.name }&lt;/header&gt;
                &lt;p&gt;
                    { product.description }
                &lt;/p&gt;
                &lt;span&gt;{ product.price }$&lt;/span&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    )
}

</code></pre></div><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><img class="l-island" src="3a3846d7394098862e934ce8550d6ead.png"><div class="current-only fragment dm-code-focus" data-code-focus="2-6"><p>We are hardcoding the product data in the function</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9-18"><p>It's important that the component returns just one HTML element in the top-level. Any more than that and React will throw an error.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13-17"><p>Any javascript in the curly braces (<code>{ code }</code>) will be evaluated.</p>
</div></div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Module #1 Tasks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><article class="dm-message-box dm-message-box--hint undefined"><header class="dm-message-box__title">Hint</header><div class="dm-message-box__body"><div>Focus on basic tasks first. They are essential for next iteration.</div><div>Make sure your code works. Don't prioritize HTML & CSS over React.</div><div>If you get stuck, ask your group or one of the mentors for help.</div></div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Install node and create-react-app</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Create a new application</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Remove auto-generated code from the src directory<article class="dm-message-box dm-message-box--inside-box-hint undefined"><div class="dm-message-box__body">Don't remove code from `src/index.js`, it's fine.</div></article></div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Create a simple component that displays a user contact<article class="dm-message-box dm-message-box--inside-box-hint undefined"><div class="dm-message-box__body">A contact should have name, phone number, e-mail address and address.
Consider using
<a href="https://randomuser.me/" target="_blank">randomuser.me</a>
for user data</div></article></div></article></div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Components and props</h1></div></section><!-- parent-child--><!-- split stuff into components--><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">List of products</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:70%;flex-basis:70%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/App.js</strong><code class="dm-code__editor hljs javascript">function App() {
    const products = [
        {
          name: &quot;JavaScript: The Definitive Guide&quot;,
          description: `Since 1996, JavaScript: The Definitive Guide...`,
          price: 28.89
        },
        {
          name: &quot;Eloquent JavaScript&quot;,
          description: `JavaScript lies at the heart...`,
          price: 21.22
        },
        {
          name: &quot;JavaScript: The Good Parts&quot;,
          description: `Most programming languages...`,
          price: 16.59
        }
    ]

    return (
        &lt;section&gt;
            &lt;h1&gt;Products&lt;/h1&gt;
            { products.map(product =&gt; (
                &lt;div&gt;
                    &lt;header&gt;{ product.name }&lt;/header&gt;
                    &lt;p&gt;
                        { product.description }
                    &lt;/p&gt;
                    &lt;span&gt;{ product.price }$&lt;/span&gt;
                &lt;/div&gt;
            )) }
        &lt;/section&gt;
    )
}
</code></pre></div><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><div class="l-island"><div class="current-only fragment dm-code-focus" data-code-focus="2-19"><p>Instead of one product our model is now a list of products</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="23-31"><p>Use the <code>Array.map</code> method to iterate over product and create JSX for each of them</p>
</div></div><img class="l-island" src="601e6d238a7983fa13583dcb054d82bd.png"></div></div></div></div></section><section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Desired API</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:65%;flex-basis:65%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/App.js</strong><code class="dm-code__editor hljs javascript">import ProductTile from &#39;./components/Product.js&#39;

function App() {
    const products = [
        {
            id: 0,
            name: &quot;JavaScript: The Definitive Guide&quot;,
            description: `Since 1996, JavaScript: The Definitive Guide has been the bible...`,
            price: 28.89
        },
        {
            id: 1,
            name: &quot;Eloquent JavaScript: A Modern Introduction to Programming&quot;,
            description: `JavaScript lies at the heart of almost every modern web application...`,
            price: 21.22
        },
        {
            id: 2,
            name: &quot;JavaScript: The Good Parts&quot;,
            description: `Most programming languages contain good and bad parts, but JavaScript...`,
            price: 16.59
        }
    ]

    return (
        &lt;section&gt;
            &lt;h1&gt;Products&lt;/h1&gt;
            { products.map(product =&gt;
                &lt;ProductTile key={ product.id }
                             item={ product } /&gt;
            ) }
        &lt;/section&gt;
    )
}
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="25-33"><p>Use the <code>Array.map</code> method to iterate over product and create JSX for each of them</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="29-30"><p>Render the <code>ProductTile</code> component. Current product will passed to the component as <code>item</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="29-30"><p>There's a new property: <code>key</code>. It's used by React to distinguish objects and should be unique in the list.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Remember to import the <code>ProductTile</code> component</p>
</div></div></div></div></section><!--include ./key_property--></section><section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Single product component</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/Product.js</strong><code class="dm-code__editor hljs javascript">import React from &#39;react&#39;

function ProductTile(props) {
    return (
        &lt;div&gt;
            &lt;header&gt;{ props.item.name }&lt;/header&gt;
            &lt;p&gt;
                { props.item.description }
            &lt;/p&gt;
            &lt;span&gt;{ props.item.price }$&lt;/span&gt;
        &lt;/div&gt;
    )
}

export default ProductTile
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="3-13"><p>The component is simple enough to be a function</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3"><p>This function will recieve a <code>props</code> object as first argument.
Keys of this object will map directly to attribute names used by the parent:</p>
<pre><code class="language-js">   &lt;ProductTile item={ product } /&gt;
</code></pre>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3"><p>Destructuring the <code>props</code> object in functional components is one of the most common patterns in React</p>
<pre><code class="language-js">   function ProductTile({ item }) { ... }
</code></pre>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>The React lib has to be included in every file that uses JSX</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="15"><p>Export the component function so that it can be used elswhere</p>
</div></div></div></div></section></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Module #2 Tasks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Create a single contact component</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Create a component for list of contacts</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add tags to the contact component</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Mark some contacts as favourites and show them on separate list</div></article></div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Components with state</h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Component as Class</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/Class.js</strong><code class="dm-code__editor hljs javascript">import React, { Component } from &#39;react&#39;

class ClassComponent extends Component {
    title = &#39;React: DevMeetings Workshop&#39;

    render() {
        return (
            &lt;h1&gt;{ this.title }&lt;/h1&gt;
        )
    }
}

export default ClassComponent
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Import the <code>Component</code> base class from <code>react</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3-11"><p>Use class instead of a function to define the component</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3"><p>The class must extend <code>Component</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="6-10"><p>Code responsible for rendering the component will be in the <code>render</code> method</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4"><p>The class may have some data or additional funcitons attached to it</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8"><p><code>this</code> represents a specific instance of the ClassComponent</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Handling events</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:65%;flex-basis:65%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/Clicker.js</strong><code class="dm-code__editor hljs javascript">import React, { Component } from &#39;react&#39;

class Clicker extends Component {
    handleButtonClick = (event) =&gt; {
        console.log(event.target.textContent);
    }

    render() {
        return (
            &lt;button onClick={this.handleButtonClick}&gt;Click me!&lt;/button&gt;
        )
    }
}

export default Clicker
</code></pre></div><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><img class="l-island" src="34455281e241b0321c18025e2067faf8.gif"><div class="current-only fragment dm-code-focus" data-code-focus="3"><p>Use class component to have access to instance methods and fields</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4-6"><p>Define the handler</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="10"><p>All handlers are assigned via the <code>onEventName</code> attribute</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="10"><p>Do not execute the hander here, just pass it in</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5"><p>Use <code>event.target</code> to find out which button has been clicked in case you have many of them</p>
</div></div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Stateful components</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/CounterClicker.js</strong><code class="dm-code__editor hljs javascript">import React, { Component } from &#39;react&#39;

class CounterClicker extends Component {
    state = {
        clickCount: 0
    }

    handleButtonClick = () =&gt; {
        this.setState({
            clickCount: this.state.clickCount + 1
        })
    }

    render() {
        return (
            &lt;button onClick={this.handleButtonClick}&gt;
                Clicked { this.state.clickCount } times!
            &lt;/button&gt;
        )
    }
}

export default CounterClicker
</code></pre></div><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><img class="l-mbn" src="5636d71cbf478a4609b270bdbb6bec92.gif"><div class="current-only fragment dm-code-focus" data-code-focus="4-6"><p>Component state is always kept in a property called <code>state</code>.
<code>state</code> and <code>props</code> are the only properites that React watches for changes.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4-6"><p>Define initial component state.
This is the only place where you write to the state property directly</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="17"><p>Display data from the state</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9-11"><p>Modify the state using the <code>setState</code> method. <code>this.state = ...</code> will not work.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8-12"><p>Arrow function is used to bind <code>this</code> correctly to the component instance</p>
</div></div></div></div></div></section><section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Loading data from server</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/AsyncList.js</strong><code class="dm-code__editor hljs javascript">class AsyncList extends Component {
    componentDidMount() {
        API.loadPosts()
            .then(posts =&gt; this.setState({ posts }))
    }

    render() {
        if (this.state.posts) {
            return (
                &lt;List items={this.state.posts} /&gt;
            )
        }

        return &lt;p&gt;Loading...&lt;/p&gt;;
    }
}
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="3-4"><p>Instead of posts being hardcoded in the component, they will be fetched from the server</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="2-5"><p>Side effects like Ajax requests are best placed in the <code>componentDidMount</code> lifecycle hook</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8-12"><p>If the posts are loaded (the <code>posts</code> property exists on state) the list will be shown</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="14"><p>Otherwise the component will render a loading indicator.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Lifecycle hooks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="dm-fragment"><h3><code>componentWillMount</code></h3>
<p>Called just before the first render. It's better to just use class constructor instead.
It might be removed in future versions.</p>
<h3><code>componentWillReceiveProps</code></h3>
<p>Called with new props, before render. Changing component's state here will not trigger another render.
Useful if the component's state is computed based on props.</p>
<h3><code>componentWillUpdate</code></h3>
<p>Similar to <code>componentWillReceiveProps</code>, but can't change state. Called just before render. Rarely used.</p>
</div></div><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="dm-fragment"><h3><code>componentDidMount</code></h3>
<p>Called after the component is rendered.
Most useful for side effects: API calls, timers, non-React code (ie. initializing a jQuery plugin).</p>
<h3><code>shouldComponentUpdate</code></h3>
<p>There are new props or new state, but maybe there is no need to render the component again. For performance tweaking.</p>
<h3><code>componentDidUpdate</code></h3>
<p>Called right after a render. Use to update DOM in response to state/props changes.</p>
<h3><code>componentWillUnmount</code></h3>
<p>Called before the component is removed. Useful for cleanup, typically compliments the <code>componentDidMount</code>.</p>
</div></div></div></div></section></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Module #3 Tasks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add searching the contacts by name</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Change search to include all fields</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add button to sort the contacts alphabetically. Clicking it should toggle sorting direction.</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add an icon the the button (↑/↓) to indicate sorting direction.</div></article></div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Routing<small class="dm-slide__title__subtitle">React Router v4</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">First routes</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/App.js</strong><code class="dm-code__editor hljs javascript">import React from &#39;react&#39;
import { BrowserRouter, Route } from &#39;react-router-dom&#39;

import HomePageComponent from &#39;./components/home&#39;
import ContactsPageComponent from &#39;./components/contact&#39;

function AppComponent() {
    return (
        &lt;BrowserRouter&gt;
            &lt;div&gt;
                &lt;h1&gt;Hello DevMeetings!&lt;/h1&gt;

                &lt;Route path=&quot;/home&quot; component={HomePageComponent}&gt;&lt;/Route&gt;
                &lt;Route path=&quot;/contacts&quot; component={ContactsPageComponent}&gt;&lt;/Route&gt;
            &lt;/div&gt;
        &lt;/BrowserRouter&gt;
    )
}

export default AppComponent</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:50%;flex-basis:50%;"><div class="l-column-fit"><div class="fragment dm-fragment"><p>The router needs to be installed first using:</p>
<pre><code class="language-sh">npm install --save react-router-dom
</code></pre>
<p>in the console</p>
</div><div class="fragment dm-code-focus" data-code-focus="2"><p>Import components from the package. <code>BrowserRouter</code> provides routing using the HTML5 <code>historyAPI</code>
and <code>Route</code> represents a single page.</p>
</div><div class="fragment dm-code-focus" data-code-focus="9-16"><p>Routing will be available to everything that is wrapped in the <code>BrowserRouter</code> tag</p>
</div><div class="fragment dm-code-focus" data-code-focus="10-15"><p>Browser router takes exactly one child element</p>
</div><div class="fragment dm-code-focus" data-code-focus="14"><p>A <code>Route</code> component defines which component to display when user navigates to specified path</p>
</div><div class="fragment dm-code-focus" data-code-focus="11"><p>Content that is not the <code>Route</code> component will be always render</p>
</div></div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Adding links</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/App.js</strong><code class="dm-code__editor hljs javascript">import React from &#39;react&#39;
import { BrowserRouter, Route, Link } from &#39;react-router-dom&#39;

import HomePageComponent from &#39;./components/home&#39;
import ContactsPageComponent from &#39;./components/contact&#39;

function AppComponent() {
    return (
        &lt;BrowserRouter&gt;
            &lt;div&gt;
                &lt;nav&gt;
                    &lt;Link to=&quot;/home&quot;&gt;Home&lt;/Link&gt;
                    &lt;Link to=&quot;/contacts&quot;&gt;Contacts&lt;/Link&gt;
                &lt;/nav&gt;

                &lt;Route path=&quot;/home&quot; component={HomePageComponent}&gt;&lt;/Route&gt;
                &lt;Route path=&quot;/contacts&quot; component={ContactsPageComponent}&gt;&lt;/Route&gt;
            &lt;/div&gt;
        &lt;/BrowserRouter&gt;
    )
}

export default AppComponent
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="l-column-fit"><div class="current-only fragment dm-code-focus" data-code-focus="2"><p>Add the <code>Link</code> component to the list of imports</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12-13"><p>The component will render a link with correct <code>href</code> and text.</p>
</div></div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Module #4 Tasks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Setup the Router with two pages: home page with title and message and contact list page (the current view)</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Create navigation component with links that displays on both pages</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">The active link should be visually distinct</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add a route for single contact page</div></article></div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Redux<small class="dm-slide__title__subtitle">Application state management</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Communication between components</h3><div class="dm-slide__content"><div class="dm-slide__content__column l-column-middle" style="min-width:50%;flex-basis:50%;"><img src="7a5f6e23883f24e4e9a9d3fa4716676e.png"></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-fragment"><p>The last example could be modified to showcase the bi-directional communication between two components:
the stateful parent (which keeps the <code>clickCount</code> in state) and a stateless child.</p>
</div><div class="current-only fragment dm-fragment"><p>The parent component passes data (<code>clickCount</code>) down to it's children using props.</p>
</div><div class="current-only fragment dm-fragment"><p>Alongside the data it also passes a callback (<code>onClick</code>) to enable the child to talk back.</p>
</div><div class="current-only fragment dm-fragment"><p>What about components that are not in the parent-child relation?</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Common parent</h3><div class="dm-slide__content"><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><img src="c0208d811cd50d430e3663af4ea5404f.png"></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-fragment"><p>The solution is to communicate via the nearest common ancestor.</p>
</div><div class="current-only fragment dm-fragment"><p>It's very easy when the components are close to each other...</p>
</div><div class="current-only fragment dm-fragment"><p>...but gets harder as the distance increases.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Distant components</h3><div class="dm-slide__content"><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><img src="58c80e0603afe11d2cab919c0bed3d72.png"></div></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><div class="current-only fragment dm-fragment"><p>For bigger component hierarchies this method becomes unmanageable.</p>
</div><div class="current-only fragment dm-fragment"><p>The application becomes fragile, it's hard to move components around,
and creating a simple interaction requires lots of code.</p>
</div><div class="current-only fragment dm-fragment"><p>There is also another issue: central components must hold too much state and responsibility.</p>
</div></div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Separate state from UI</h3><div class="dm-slide__content"><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><img src="7da3fb1d180546f2fce78de1684e9a1e.png"></div></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><div class="current-only fragment dm-fragment"><p>One of the solutions is to move the application state away from it's view layer (aka components).</p>
</div><div class="current-only fragment dm-fragment"><p>All of the data will be kept in an object accesible by every component.</p>
</div><div class="current-only fragment dm-fragment"><p>Components will be able to modify the state using events.</p>
</div></div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Principles of Redux</h3><div class="dm-slide__content"><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="l-column-fit"><img src="b4e23a502e44692d9f3c8b427ac23e01.png"></div></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><div class="fragment dm-fragment"><h3>Single source of truth</h3>
<p>The complete state of an application is kept in one place, which ensures no duplication or conflicts.</p>
</div><div class="fragment dm-fragment"><h3>Predictable</h3>
<p>The state can only be changed via events (actions). It makes tracking the changes very easy.</p>
</div><div class="fragment dm-fragment"><h3>Immutable</h3>
<p>The state is represented as an immutable object. Every change creates a new snapshot.
This provides solid performance (no need to compare values!) and easy testing.</p>
</div></div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Redux in a nutshell</h3><div class="dm-slide__content"><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><div class="fragment dm-fragment"><h3><code>store</code></h3><p>Holds current application state</p></div><div class="fragment dm-fragment"><h3><code>action</code></h3><p>An object that may result in change of state</p></div><div class="fragment dm-fragment"><h3><code>store#dispatch(action)</code></h3><p>Notifies the store about an action</p></div><div class="fragment dm-fragment"><h3><code>reducer</code></h3><p>A function that gets called for every action and returns new application state accordingly</p></div></div></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><img src="84d8c1e066be03820c5c2dba175b975a.png"></div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Actions</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:40%;flex-basis:40%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/actions.js</strong><code class="dm-code__editor hljs javascript">export function WithdrawAction(amount) {
   return {
       type: &#39;WITHDRAW&#39;,
       amount
   }
}

export function DepositAction(amount) {
    return {
        type: &#39;DEPOSIT&#39;,
        amount
    }
}
</code></pre></div><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="fragment dm-fragment">Actions are the messages that tell the store there's a need to change state</div><div class="current-only fragment dm-code-focus" data-code-focus="2-5"><p>Action is a plain JS object</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3"><p>Action must have a <code>type</code> property</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4"><p>Usually there is some data attached to the action.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8-13"><p>To avoid mistakes, like typos, action objects are returned by functions - called <strong>action creators</strong></p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Reducer</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/reducer.js</strong><code class="dm-code__editor hljs javascript">export default function balanceReducer(state = { balance: 0 }, action) {
    switch (action.type) {
        case &#39;DEPOSIT&#39;:
            return { balance: state.balance + action.amount };

        case &#39;WITHDRAW&#39;:
            return { balance: state.balance - action.amount };

        default:
            return state;
    }
}

</code></pre><div class="current-only fragment dm-fragment">Reducers are called by Redux every time an action is dispatched</div><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Reducer is just a function.
It is important that it is a <strong>pure function</strong> (a function that has no side-effects):
it should always return new state object and not change anything outside of the function</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>It takes two arguments: the current state and the dispatched action</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Initially there will be no state, so the default value is provided</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="2-11"><p>Every relevant action will be handled in this swtich statement depending on it's type</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3-4"><p>The <code>DEPOSIT</code> action will increase the balance by a certain amount.</p>
<p>The origial state is not modified here; a new object is returned instead.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9-10"><p>In case the action that has been dispatched
doesn't match any action handler defined in this reducer,
the current state will be returned by default.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">The store</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/app.js</strong><code class="dm-code__editor hljs javascript">import { createStore } from &#39;redux&#39;
import { DepositAction, WithdrawAction } from &#39;./actions&#39;
import balanceReducer from &#39;./reducer&#39;

const store = createStore(balanceReducer);

store.subscribe(() =&gt; {
    const currentState = store.getState();

    console.log(currentState);
});

store.dispatch(DepositAction(500));
store.dispatch(DepositAction(100));
store.dispatch(WithdrawAction(220));
</code></pre></div><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="fragment dm-fragment">Store is the centerpiece of redux.
It glues state, actions and reducers together.
There will be only one store per application.</div><div class="current-only fragment dm-code-focus" data-code-focus="5"><p>Create the store using the <code>createStore</code> funciton from <code>redux</code>.
It takes the reducer as first argument.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="7-12"><p>Use the <code>subscribe</code> method and pass in a callback.
The callback will be called after every dispatched action.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8"><p>You can access the current application state using the <code>getState</code> method.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13-15"><p>Use the <code>dispatch</code> method to run some actions against the store.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Using Redux with React: the setup</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/store.js</strong><code class="dm-code__editor hljs javascript">import React from &#39;react&#39;;
import ReactDOM from &#39;react-dom&#39;;
import { Provider } from &#39;react-redux&#39;
import { createStore } from &#39;redux&#39;

import App from &#39;./App&#39;;
import &#39;./index.css&#39;;

import balanceReducer from &#39;./reducer&#39;

const store = createStore(balanceReducer);

ReactDOM.render(
    &lt;Provider store={store}&gt;
        &lt;App /&gt;
    &lt;/Provider&gt;,
    document.getElementById(&#39;root&#39;)
);</code></pre></div><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="9"><p>Reducers stay exactly the same</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="11"><p>Create the store</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="14-16"><p>The <code>Provider</code> component allows access to the store for all components in the application</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Connecting store and components</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/reducer.js</strong><code class="dm-code__editor hljs javascript">import React from &#39;react&#39;;
import { connect } from &#39;react-redux&#39;

function AppComponent({ accountBalance }) {
    return (
        &lt;div&gt;
            &lt;h3&gt;Current balance: ${accountBalance}&lt;/h3&gt;
        &lt;/div&gt;
    )
}

function mapStateToProps(state) {
    return {
        accountBalance: state.balance
    }
}

export default connect(mapStateToProps)(AppComponent);
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="4-10"><p>A simple component that displays the current balance</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12-16"><p>The <code>mapStateToProps</code> function will be called everytime the application state changes.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13-15"><p>It's job is to return props for the component.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4"><p>The component will receive props provided by <code>mapStateToProps</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="18"><p>Component and the function are connected via the <code>connect</code> utility from <code>react-redux</code></p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Dispatching actions</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">src/reducer.js</strong><code class="dm-code__editor hljs javascript">import React, { Component } from &#39;react&#39;
import { connect } from &#39;react-redux&#39;
import { DepositAction, WithdrawAction } from &#39;./actions&#39;

class AppComponent extends Component {

    onDeposit = () =&gt; {
        this.props.dispatch(DepositAction(100))
    }

    onWithdraw = () =&gt; {
        this.props.dispatch(WithdrawAction(100))
    }

    render() {
        &lt;div&gt;
            &lt;h3&gt;
                Current balance: ${this.props.accountBalance}
                &lt;button onClick={this.onDeposit}&gt;+&lt;/button&gt;
                &lt;button onClick={this.onWithdraw}&gt;-&lt;/button&gt;
            &lt;/h3&gt;
        &lt;/div&gt;
    }
}

function mapStateToProps(state) {
    return {
        accountBalance: state.balance
    }
}

export default connect(mapStateToProps)(AppComponent);
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:undefined%;flex-basis:undefined%;"><div class="current-only fragment dm-code-focus" data-code-focus="5-24"><p>A simple component that displays the current balance</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="26-30"><p>The balance is provided by <code>mapStateToProps</code> function</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="7-9"><p>Clicking a button will result in action being called</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8"><p>The action is created by an action creator: <code>DepositAction</code>/<code>WithdrawAction</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8"><p>The <code>connect</code> function also provides the store's <code>dispatch</code> method in props</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Module #5 Tasks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body"><p>Setup Redux: create store, wrap the application in <code>Provider</code>, and <code>connect</code> main component</p>
</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Move all contacts data to the store</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add the ability to mark a contact as favourite</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Mark some contacts as favourites and show them on separate list</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add the ability to remove contacts</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add the ability to add new contacts</div></article></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Redux side-effects<small class="dm-slide__title__subtitle">Going for the best experience</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">What is a thunk?</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">function answer() {
    return 42;
}

function greeting(name) {
    return () =&gt; `Hello, ${name}!`;
}

function fetchData(params, transformFn) {
    return function() {
        API.fetch(params)
            .then(result =&gt; transformFn(result));
    }
}
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:50%;flex-basis:50%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-3"><p>A thunk is just a function that will return some data or perform an operation when called.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1-3"><p>The function takes no arguments - it has access to all data it needs.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5-7"><p>Most often the thunk will have access to some params via closure.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9-14"><p>The thunk can do anything - synchoronous or not</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Thunks in Redux - setup and basic usage</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">import { createStore, applyMiddleware } from &#39;redux&#39;;
import thunk from &#39;redux-thunk&#39;;

const store = createStore(
    /* reducers, */
    applyMiddleware(thunk)
);

function greet(name) {
    return { type: &#39;GREET&#39;, name }
}

function hello(name) {
    return function (dispatch) {
        dispatch(greet(&#39;Maciej&#39;));
    };
}
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:50%;flex-basis:50%;"><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Import standard methods from <code>redux</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="2"><p>The <code>redux-thunk</code> library provides a middleware</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4-7"><p>Create a store providing reducers (out of slide) and applying thunk middleware</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9-11"><p>Very simple action creator</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9-11"><p><code>hello</code> is a function that will return a thunk - it's here for the purpose of creating a closure over <code>name</code> argument</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="14-16"><p>Thanks to the <code>thunk</code> middleware, the thunk will actually get the store's <code>dispatch</code> function as first argument.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="15"><p>Use the <code>dispatch</code> to dispatch <code>greet</code> action.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Multiple and asynchronous actions</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">/* imports, setup, middleware */

function timerStart(timerId) {
    return { type: &#39;TIMER_START&#39;, timerId };
}

function timerEnd() {
    return { type: &#39;TIMER_END&#39; };
}

function runTimer(delay) {
    return function(dispatch) {
        const timerId = setTimeout(() =&gt; {
            dispatch(timerEnd());
        }, delay * 1000);

        dispatch(timerStart(timerId));
    };
}

store.dispatch(runTimer(5));
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:50%;flex-basis:50%;"><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Imports and setup of store and middleware - just as before</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3-9"><p>Define regular, synchronous action creators</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="11-19"><p>Create a thunk that takes in one argument</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="17"><p>At first it will dispatch the <code>TIMER_START</code> action</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13-15"><p>After the delay, dispatch <code>TIMER_END</code> action</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="21"><p>Still dispatches like a regular action</p>
</div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title"><small class="dm-slide__title__subtitle">Working with websockets</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Setting up the store</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">/** CONSOLE **/
npm install --save socket.io
npm install --save redux-socket.io

/** STORE.JS **/
import { createStore, applyMiddleware } from &#39;redux&#39;;

import createSocketIoMiddleware from &#39;redux-socket.io&#39;;
import io from &#39;socket.io-client&#39;;
let socket = io(SOCKET_ADDRESS);
let socketIoMiddleware = createSocketIoMiddleware(socket, &quot;SERVER/&quot;);

const store = createStore(
    /* reducers, */
    applyMiddleware(socketIoMiddleware)
);
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:50%;flex-basis:50%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-3"><p>Install required packages</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="10"><p>Create a socket connection using the <code>socket.io</code> library</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="11"><p>Create the middleware for handling sockets. It takes the socket as first argument.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="11"><p>The second argument is the <em>socket action prefix</em>:
in this example, all actions prefixed with <code>SERVER/</code> (<code>SERVER/ADD_TODO</code>, etc) will emit a message through the socket</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13-16"><p>Standard store setup</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Receiving actions from the server</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">/** SERVER **/
socket.emit(&#39;action&#39;, {
    type: &#39;ADD_PRODUCT&#39;,
    payload: { /* product */ }
});


/** CLIENT **/

function productsReducer(state = [], action) {
    switch (action.type) {
        case &#39;ADD_PRODUCT&#39;:
            return [...state, action.payload];

        default:
            return state;
    }
}
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:50%;flex-basis:50%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-5"><p>Server will emit <code>action</code> events, which data is the action to dispatch to store</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8"><p>On the client-side, subscribing to events is handled by the socket.io middleware</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="10-18"><p>Since an action is just a plain object, there is no difference between handling action dispached on client or server.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Dispatching actions to the server</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">/** CLIENT **/
function addProduct(product) {
    return {
        type: &#39;SERVER/ADD_PRODUCT&#39;,
        payload: product
    };
}

store.dispatch(addProduct({ /* product */ }));

/** SERVER **/
socket.on(&#39;action&#39;, (action) =&gt; {
    switch (action.type) {
        case &#39;SERVER/ADD_PRODUCT&#39;:
            /* handle adding product */
    }
});
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:50%;flex-basis:50%;"><div class="current-only fragment dm-code-focus" data-code-focus="2-7"><p>Action that will be dispatched to the server via websockets is just a regular action.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4"><p>The only difference: the action type starts with <code>SERVER/</code>, which matches the middleware configuration</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9"><p>Dispatch the action as usual</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12-21"><p>The server will receive <code>action</code> event, with the action as payload</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="14-15"><p>The action will be handled depending on its type</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Tasks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Load the contacts from the server</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Push contacts updates to the server</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Handle contacts remove and insert</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add authentication</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Display a toast (notification) every time a contact is updated/removed/inserted</div></article></div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Redux best practises<small class="dm-slide__title__subtitle">Tools for the best experience</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Setup react-router with Redux</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">/* INSTALLATION */
// npm install --save react-router-redux@next
// npm install --save history

import { createStore, combineReducers, applyMiddleware } from &#39;redux&#39;;
import { routerReducer, routerMiddleware } from &#39;react-router-redux&#39;;
import createBrowserHistory from &#39;history/createBrowserHistory&#39;;

export const history = createBrowserHistory();
const middleware = routerMiddleware(history);

export const store = createStore(
    combineReducers({
        /* ...reducers, */
        router: routerReducer
    }),
    applyMiddleware(middleware)
)
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-3"><p>Install the required packages</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="2"><p>Remember to add the <code>@next</code> suffix -
the default version of <code>react-router-redux</code> works only with old <code>react-router</code> versions</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="7"><p><code>history</code> is a library that allows easy management of session history via JS.
The <code>createBrowserHistory</code> method is using HTML5 History API and should be used with new browsers.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9"><p>Create and export a <code>history</code> instance for the application</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="10"><p>Setup routing middleware to use the <code>history</code>instance</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12-18"><p>Standard store setup with multiple reducers and a middleware</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="15"><p>Routing state is in the <code>router</code> sub-tree of the application state</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Use the Redux router</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">import React from &#39;react&#39;
import ReactDOM from &#39;react-dom&#39;

import { Provider } from &#39;react-redux&#39;;
import { Route } from &#39;react-router&#39;;
import { ConnectedRouter } from &#39;react-router-redux&#39;;

import {history, store} from &quot;./store&quot;

ReactDOM.render(
    &lt;Provider store={store}&gt;
        &lt;ConnectedRouter history={history}&gt;
            &lt;div&gt;
                &lt;Route exact path=&quot;/&quot; component={Home}/&gt;
                &lt;Route path=&quot;/about&quot; component={About}/&gt;
            &lt;/div&gt;
        &lt;/ConnectedRouter&gt;
    &lt;/Provider&gt;,
    document.getElementById(&#39;root&#39;)
)

</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-5"><p>Standard imports for the router component</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="6"><p>Instead of <code>Router</code> or <code>BrowserRouter</code> import the <code>ConnectedRouter</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="11-18"><p>Standard Redux setup</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12-17"><p>The <code>&lt;ConnectedRouter /&gt;</code> component should be a child of the <code>&lt;Provider /&gt;</code>
so that it knows to use the application's <code>store</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="14-15"><p>Setting up <code>&lt;Route /&gt;</code>'s is the same as before</p>
</div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title"><small class="dm-slide__title__subtitle">Handling denormalized data</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Denormalized state</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:40%;flex-basis:40%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs json">[
    {
      &quot;id&quot;: 0,
      &quot;user&quot;: { &quot;id&quot;: 0, &quot;name&quot;: &quot;Maciej&quot; },
      &quot;songs&quot;: [
        {
          &quot;id&quot;: 1,
          &quot;title&quot;: &quot;Far Behind&quot;,
          &quot;author&quot;: { &quot;id&quot;: 200, &quot;name&quot;: &quot;Oleska&quot; }
        },
        {
          &quot;id&quot;: 2,
          &quot;title&quot;: &quot;Celebration&quot;,
          &quot;author&quot;: { &quot;id&quot;: 200, &quot;name&quot;: &quot;Oleska&quot; }
        },
        {
          &quot;id&quot;: 3,
          &quot;title&quot;: &quot;Back to Back&quot;,
          &quot;author&quot;: { &quot;id&quot;: 205, &quot;name&quot;: &quot;Drake&quot; }
        }
      ]
    },
    {
      &quot;id&quot;: 1,
      &quot;user&quot;: { &quot;id&quot;: 1, &quot;name&quot;: &quot;Wojtek&quot; },
      &quot;songs&quot;: [
        {
          &quot;id&quot;: 1,
          &quot;title&quot;: &quot;Far Behind&quot;,
          &quot;author&quot;: { &quot;id&quot;: 200, &quot;name&quot;: &quot;Oleska&quot; }
        },
        {
          &quot;id&quot;: 4,
          &quot;title&quot;: &quot;Tuesday&quot;,
          &quot;author&quot;: { &quot;id&quot;: 205, &quot;name&quot;: &quot;Drake&quot; }
        }
      ]
    }
  ]
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:60%;flex-basis:60%;"><div class="current-only fragment dm-code-focus" data-code-focus="2-22"><p>The following JSON is a result of calling <code>GET /playlists</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="23-38"><p>The API returns an array of <code>playlists</code>,
each containing array of <code>song</code>s with <code>author</code>s
and the <code>user</code> the <code>playlist</code> belongs to.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="23-38"><p>This is a standard way of dealing with relations in data
and appears very often (ie. <code>posts</code>-<code>comments</code>-<code>authors</code>)</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5-21"><p>Problem #1: duplicated data - some songs and authors appear more than once</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9"><p>Problem #2: very difficult to update nested data and remain consistent</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Normalization schema</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">playlistsNormalizer.js</strong><code class="dm-code__editor hljs javascript">// npm install --save normalizr
const { normalize, schema } = require(&#39;normalizr&#39;);

const userSchema = new schema.Entity(&#39;users&#39;);
const authorSchema = new schema.Entity(&#39;authors&#39;);
export const songSchema = new schema.Entity(&#39;songs&#39;, {
    author: authorSchema
});
export const playlistSchema = new schema.Entity(&#39;playlists&#39;, {
    user: userSchema,
    songs: [songSchema]
});

export const playlistsSchema = [playlistSchema];

export default function(data) {
    return normalize(data, playlistsSchema);
}
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Install <code>normalizr</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4-12"><p>A <code>playlist</code> contains a <code>user</code> and <code>song</code>s with <code>authors</code>. In normalizr those are called <em>entities</em>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4-12"><p>All entities are instances of the <code>Entity</code> class.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4-5"><p>Entities with no relationships are the easiest to cover.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="6-8"><p>Each <code>song</code> contains an <code>author</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9-12"><p>Each <code>playlist</code> has a <code>user</code> and a <strong>list</strong> of <code>songs</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="14"><p>Final schema is a list of <code>playlists</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="16-18"><p>The <code>normalize</code> function takes some denormalized
<code>data</code> and normalizes it using the provided <code>schema</code>.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Normalized state</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:40%;flex-basis:40%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs json">{
  &quot;entities&quot;: {
    &quot;result&quot;: [ 0, 1 ],
    &quot;playlists&quot;: {
      &quot;0&quot;: {
        &quot;id&quot;: 0,
        &quot;user&quot;: 0,
        &quot;songs&quot;: [ 1, 2, 3 ]
      },
      &quot;1&quot;: {
        &quot;id&quot;: 1,
        &quot;user&quot;: 1,
        &quot;songs&quot;: [ 1, 4 ]
      }
    },
    &quot;songs&quot;: {
      &quot;1&quot;: {
        &quot;id&quot;: 1,
        &quot;title&quot;: &quot;Far Behind&quot;,
        &quot;author&quot;: 200
      },
      &quot;2&quot;: {
        &quot;id&quot;: 2,
        &quot;title&quot;: &quot;Celebration&quot;,
        &quot;author&quot;: 200
      },
      &quot;3&quot;: {
        &quot;id&quot;: 3,
        &quot;title&quot;: &quot;Back to Back&quot;,
        &quot;author&quot;: 205
      },
      &quot;4&quot;: {
        &quot;id&quot;: 4,
        &quot;title&quot;: &quot;Tuesday&quot;,
        &quot;author&quot;: 205
      }
    },
    &quot;users&quot;: {
      &quot;0&quot;: { &quot;id&quot;: 0, &quot;name&quot;: &quot;Maciej&quot; },
      &quot;1&quot;: { &quot;id&quot;: 1, &quot;name&quot;: &quot;Wojtek&quot; }
    },
    &quot;authors&quot;: {
      &quot;200&quot;: { &quot;id&quot;: 200, &quot;name&quot;: &quot;Oleska&quot; },
      &quot;205&quot;: { &quot;id&quot;: 205, &quot;name&quot;: &quot;Drake&quot; }
    }
  }
}

</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:60%;flex-basis:60%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-47"><p>The following object is a result using <code>normalizr</code> on the list of playlists</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5-9"><p>A <code>playlist</code> now doesn't hold any data belonding to another entity - just the ids.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="16-37"><p>Each <code>song</code> is represented exactly once.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="38-45"><p>Same goes for <code>user</code>s and <code>author</code>s</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4-15"><p>Entities are records in a dictionary which keys are the entity ids.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3"><p>Since playlists changed from an array to an object the ordering was lost.
The <code>result</code> field holds the original order of elements.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Using normalizr with redux</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">/* REDUCER */

import normalizePlaylists from &#39;./schema&#39;;

function reducer(state = {}, action) {
    switch (action.type) {
        case &#39;DESERIALIZE_PLAYLISTS&#39;:
            const normalized = normalizePlaylists(action.payload);
            return Object.assign({}, state, normalized.entities);

        default:
            return state;
    }
}

/* CONTAINER */

import {denormalize} from &#39;normalizr&#39;;
import {playlistSchema} from &#39;./schema&#39;


function mapStateToProps(state) {
    const normalizedPlaylist = state.playlists[state.currentPlaylistId];
    const denormalizedPlaylist = denormalize(
        normalizedPlaylist,
        playlistSchema,
        state
    );
    return {
        currentPlaylist: denormalizedPlaylist
    };
}

export default connect(mapStateToProps)(Container)
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-14"><p>To keep the state normalized all updates should normalize the data first</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3"><p>The <code>normalizePlaylists</code> is a function exported from the schema definition file (one of previous slides)</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8"><p><code>action.payload</code> is the denormalized API response</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9"><p>Update the application state with fully normalized entities</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="22-32"><p>The normalized state, while easy to manage,
is not useful to components and requries some transformation</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="23"><p>Get currently viewed playlist. The data is normalized and it's denormalization quite complicated - there are multiple levels of nesting.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="24-28"><p>Use the <code>denormalize</code> utility from <code>normalizr</code>,
passing in normalized data, the normalization schema,
and all relevant entities.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="26"><p>The <code>playlistSchema</code> is defined on earlier slide.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title"><small class="dm-slide__title__subtitle">Immutable data structures</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Basics of immutable structures</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">import {Map, List, fromJS} from &#39;immutable&#39;;

const mutableCollection = [1, 2, 3];
mutableCollection.push(4);
// mutableCollection =&gt; [1, 2, 3, 4]

const immutableCollection = List([1, 2, 3]);
immutableCollection.push(4);
// immutableCollection =&gt; [1, 2, 3]

const mutableObject = { foo: 1, bar: 2 };
console.log(mutableObject.foo); // 1
mutableObject.bar = &#39;baz&#39;;
// mutableObject =&gt; { foo: 1, bar: &#39;baz&#39; }

const immutableObject = Map({ foo: 1, bar: 2});
immutableObject.get(&#39;foo&#39;); // 1
immutableObject.set(&#39;bar&#39;, &#39;baz&#39;);
// immutableObject =&gt; { foo: 1, bar: 2 }

const immutableStructure = fromJS({ /* properties */ });
const mutableAgain = immutableStructure.toJS();
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="3-5"><p>Mutable collection (aka regular array) can be changed with methods or overiding the data</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="7-9"><p>Immutable collections are called <code>List</code>s.
Pushing to a <code>List</code> will return a new instance.
Original <code>List</code> will be unchanged.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="11-14"><p>Same principle applies to objects.
Plain JS objects can be easily modified.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="16-19"><p>Immutable objects are called <code>Map</code>s.
They are less straight-forward to access (<code>.get</code>), but will return a new object after <code>set</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="21"><p>Converting deeply nesting structures to Immutable is easy with <code>fromJS</code> utility</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="22"><p>Each of Immutablejs structures has a <code>toJS</code> method that allows to convert the structure back to plan JS.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Using immutable data with redux</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">import {Map, fromJS} from &#39;immutable&#39;;

const defaultState = Map();

function reducer(state = defaultState, action) {
    switch (action.type) {
        case &#39;UPDATE_STATE&#39;:
            return state.merge(action.payload);

        case &#39;ADD_ITEM&#39;:
            const items = state.get(&#39;items&#39;)
                .push(Map(action.payload));

            return state.merge({ items });

        default:
            return state;
    }
}
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="3"><p>Define the <code>defaultState</code> for this reducer as an immutable <code>object</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8"><p>General state updates can be handled with <code>merge</code> or <code>mergeDeep</code> utilities</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="11-12"><p>Actions that create more specific updates need custom logic.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12"><p><strong>Never</strong> <code>set</code> or <code>push</code> mutable object to otherwise immutable structure.
Regular objects need to be converted to immutable with proper constructor function.
When in doubt use <code>fromJS</code>. <code>merge</code> and <code>mergeDeep</code> are safe too.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Tasks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Replace `react-router` with the Redux version</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Convert the state to use immutable objects</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add grouping contacts: multiple contact lists. A contact may belong to multiple groups.</div></article></div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Redux-saga<small class="dm-slide__title__subtitle">Typed Javascript with Flow</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Setting up</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">// npm install --save redux-saga

import { createStore, applyMiddleware } from &#39;redux&#39;

import createSagaMiddleware from &#39;redux-saga&#39;;
const sagaMiddleware = createSagaMiddleware();

const store = createStore(
    /* reducer, */
    applyMiddleware(sagaMiddleware)
);

function* greeterSaga() {
    console.log(&#39;Greetings!&#39;)
}

sagaMiddleware.run(greeterSaga);

</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Install the <code>redux-saga</code> package</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5-6"><p>Import and create the middlewares for handling sagas</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8-11"><p>Create the store as usual, passing in the middleware</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13-15"><Sagas>are generator functions</Sagas></div><div class="current-only fragment dm-code-focus" data-code-focus="14"><p>This particular saga does nothing but say 'Greetings!' every time an action is dispatched to the store</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="17"><p>Start the saga</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Handling actions with sagas</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">/** ACTION CREATORS **/
function timerStart(time) {
    return { type: &#39;TIMER_START&#39;, time };
}

function timerEnd() {
    return { type: &#39;TIMER_END&#39; };
}

/** SAGAS **/

import { delay } from &#39;redux-saga&#39;;
import { put, takeEvery } from &#39;redux-saga/effects&#39;;

function* timerSaga() {
    yield takeEvery(&#39;TIMER_START&#39;, runTimer);
}

function* runTimer(action) {
    yield delay(action.time * 1000);
    yield put(timerEnd())
}


/** STORE **/
sagaMiddleware.run(timerSaga);

store.dispatch(timerStart(30));
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-29"><p>Let's rewrite the thunk timer example to sagas</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1-8"><p>The action creators remained almost unchanged;
the <code>runTimer</code> action creator was removed</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12-13"><p>Import utilities from the <code>redux-saga</code> lib</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="15-17"><p>The <code>timerSaga</code> watches for <code>TIMER_START</code> actions using the <code>takeEvery</code> effect.
When such action is dispached it will call the <code>runTimer</code> saga with the action.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="19-22"><p>The <code>runTimer</code> saga is tasked with handling individual actions</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="19"><p>It receives the <code>action</code> object as an argument</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="20"><p>The <code>delay</code> effect returns a promise that will be resolved after N miliseconds.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="20"><p><code>yield</code>ing the promise to saga's middleware will cause the execution of <code>runTimer</code> to pause until the promise is resolved.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="21"><p>After the scheduled delay, <code>runTimer</code> will <code>put</code> the <code>TIMER_END</code> action.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="21"><p>Using <code>put</code> will dispatch the action that was passed in</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="25-26"><p>Use the saga middleware to run the <code>timerSaga</code>.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Running multiple sagas</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">/** SAGAS/INDEX.JS **/
import { all } from `redux-saga/effects`;

import {sagaA} from &#39;./sagaA&#39;;
import {sagaB} from &#39;./sagaB&#39;;
/* ... */

export function* rootSaga() {
    yield all([
        sagaA(),
        sagaB(),
        /* ... */
    ])
}

/** STORE.JS **/
import {rootSaga} from &quot;./sagas&quot;

const sagaMiddleware = createSagaMiddleware()
const store = createStore(
    /* reducer, */
    applyMiddleware(sagaMiddleware)
);

sagaMiddleware.run(rootSaga);
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="23"><p>The <code>.run</code> method on saga middleware can only run a single saga</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4-6"><p>Import all required sagas</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8-14"><p>Create a top-level saga</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9-13"><p>Run all sagas in parallel using the <code>all</code> utility.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="25"><p>Run the top-level saga on the middleware</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Tasks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Rewrite the REST API calls to use sagas instead of thunks</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Create a saga that handles notifications</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Create a saga that handles authentication</div></article></div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Testing React & Redux</h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Introducing Jest - the testing lib for React apps</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">./services/Service.test.js</strong><code class="dm-code__editor hljs javascript">class Service {
    foo = 6;

    bar(value) {
        return Boolean(value);
    }
}

describe(&#39;Service&#39;, () =&gt; {
    let instance;

    beforeEach(() =&gt; {
        instance = new Service();
    });

    it(&#39;has `foo` property&#39;, () =&gt; {
        expect(instance.foo).toBe(6);
    });

    describe(&#39;#bar&#39;, () =&gt; {
        it(&#39;returns true if passed truthy value&#39;, () =&gt; {
            expect(instance.bar(true)).toBe(true);
        });
    });
});
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:50%;flex-basis:50%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-26"><p>To properly work with the default <code>create-react-app</code> config,
all tests are in files which names end with <code>.test.js</code>.
For example, if <code>MyComponent</code> is in file <code>MyComponent.js</code>,
it's tests should be in file called <code>MyComponent.test.js</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9-25"><p>Tests are grouped in <code>describe</code> blocks.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9"><p>The top level <code>describe</code> is actually optional:
properly naming the file should be enough,
provided there is only one class/service/component per file</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12-14"><p>Code in <code>beforeEach</code> block will be run before each test.
This block should be used for initialization of fixtures/common setup.
There should be no shared state between tests.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="16-18"><p>A test is a function (<code>it</code> or <code>test</code>) that takes 2 arguments:
the test <code>description</code> and a function that will contain expectations</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="17"><p>The <code>expect</code> function is used for testing values.
It is followed by a matcher -- a function that asserts something about the value.
In this case it's <code>toBe</code> which checks equality</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="20-24"><p><code>describe</code> blocks can be nested, along with their own <code>beforeEach</code>/<code>afterEach</code> functions.
Nested <code>describes</code> are using for grouping tests.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title"><small class="dm-slide__title__subtitle">Testing components</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Smoke tests - just checking</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:50%;flex-basis:50%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">MyComponent.test.js</strong><code class="dm-code__editor hljs javascript">import React from &#39;react&#39;;
import ReactDOM from &#39;react-dom&#39;;
import MyComponent from &#39;./MyComponent&#39;;

describe(&#39;&lt;MyComponent/&gt;&#39;, () =&gt; {
    it(&#39;renders without crashing&#39;, () =&gt; {
        const div = document.createElement(&#39;div&#39;);
        ReactDOM.render(&lt;MyComponent /&gt;, div);
    });
})
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:50%;flex-basis:50%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-11"><p>By far the simplest test of React component test is a <em>smoke test</em>:
just seeing if there are no errors when using the component.
It's <strong>often</strong> enough for functional/presentational components that have no logic</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1-2"><p>Import required React packages</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3"><p>Import the component</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="6-9"><p>Try to render the component into a div</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="6-9"><p>This test has no <code>expect</code> statements. It will pass unless an error is thrown.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8"><p>Note: this is not exactly unit testing: if there are no errors,
then entire component subtree will be rendered.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Shallow rendering</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">MyComponent.test.js</strong><code class="dm-code__editor hljs javascript">import React from &#39;react&#39;;
import { shallow } from &#39;enzyme&#39;;

import MyComponent from &#39;./MyComponent&#39;;

describe(&#39;&lt;MyComponent/&gt;&#39;, () =&gt; {
    it(&#39;renders the button&#39;, () =&gt; {
        const wrapper = shallow(&lt;MyComponent&gt;Hello&lt;/MyComponent&gt;);
        expect(wrapper.contains(&lt;button&gt;Hello&lt;/button&gt;)).toBe(true);
    });
})
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-12"><p><code>Enzyme</code> lib, especially the <code>shallow</code> renderer are used for proper unit-testing React components</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="2"><p>Instead of the standard <code>ReactDOM</code>, the rendering will be handled by <code>shallow</code> renderer from <code>enzyme</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8"><p>Use it to render <code>&lt;MyComponent /&gt;</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8"><p>The component will not try to render any of other React components that are children to <code>&lt;MyComponent/&gt;</code>.
They will be treat as normal HTML elements instead.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="9"><p><code>wrapper</code> is a smart wrapper over a React node, that exposes various API to query and interact with the subtree</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Snapshots</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">MyComponent.test.js</strong><code class="dm-code__editor hljs javascript">import React from &#39;react&#39;;
import renderer from &#39;react-test-renderer&#39;;

import MyComponent from &#39;./MyComponent&#39;;

it(&#39;renders correctly&#39;, () =&gt; {
    const tree = renderer.create(
        &lt;MyComponent message=&quot;Hello!&quot;&gt;
            Click here!
        &lt;/MyComponent&gt;
    ).toJSON();

    expect(tree).toMatchSnapshot();
});


/** SNAPSHOT **/
exports[`renders correctly 1`] = `
&lt;div className=&quot;my-component&quot;&gt;
  &lt;button onClick={[Function]}&gt;Click here!&lt;/button&gt;
&lt;/div&gt;
`;


/** CHANGED TEST **/
it(&#39;renders correctly&#39;, () =&gt; {
    const tree = renderer.create(
        &lt;MyComponent message=&quot;Hello!&quot;&gt;
            And now here!
        &lt;/MyComponent&gt;
    ).toJSON();

    expect(tree).toMatchSnapshot();
});

/** CONSOLE **/
jest --updateSnapshot
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-38"><p>Snapshots are used to prevent accidental changes of UI</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="2"><p>Import <code>renderer</code> that will render the component instead of the usual <code>ReactDOM</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="7-11"><p>Use it to render <code>&lt;MyComponent /&gt;</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="7-11"><p>The <code>renderer.create</code> method returns a JS object representing the rendered component</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13"><p>Use the <code>toMatchSnapshot</code> to check if generated tree matches the previously saved snapshot</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="6-14"><p>This test will pass the first time it's run, because there is no snapshot to match against.
At the same time the snapshot will be created.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="17-22"><p>The snapshot is JSX-like representation of the rendered subtree.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="17-22"><p>Snapshots are saved to a file with <code>.snap</code> extension that should be checked into the VCS</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="25-34"><p>If the test or the component are modified, matching against the snapshot will fail</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="36-37"><p>Replace old snapshots with new version</p>
</div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title"><small class="dm-slide__title__subtitle">Testing Redux</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Regular action creators</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">MyComponent.test.js</strong><code class="dm-code__editor hljs javascript">/** ACTION CREATOR **/
export function addTodo(text) {
    return {
        type: &#39;ADD_TODO&#39;,
        payload: {
            text,
            completed: false
        }
    };
}


/** TEST **/
describe(&#39;addTodo&#39;, () =&gt; {
    it(&#39;returns action with correct type&#39;, () =&gt; {
        const action = addTodo(&#39;Learn React&#39;);
        expect(action.type).toBe(&#39;ADD_TODO&#39;);
    });

    it(&#39;returns action with the todo in payload&#39;, () =&gt; {
        const action = addTodo(&#39;Learn React&#39;);
        expect(action.payload.text).toBe(&#39;Learn React&#39;);
    });
});
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-25"><p>Synchronous action creators are usually very simple functions, so testing is staright-forward</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1-10"><p>An action creator straight from the world's most popular React application</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="15-18"><p>Check for correct type</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="20-23"><p>Check for correct payload</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13-24"><p>Such simple action creators are commonly tested indirectly when testing reducers
and have no tests on their own</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Reducers</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">MyComponent.test.js</strong><code class="dm-code__editor hljs javascript">import todos from &#39;reducers/todos&#39;;

describe(&#39;todos reducer&#39;, () =&gt; {
    it(&#39;handles ADD_TODO&#39;, () =&gt; {
        const state = todos([], addTodo(&#39;Test AddTodo&#39;));
        const expected = [
            {
                text: &#39;Test AddTodo&#39;,
                completed: false
            }
        ];

        expect(state).toEqual(expected);
    });
});
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-16"><p>Reducers are <strong>pure functions</strong>, which makes them very easy to test</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Import the reducer</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5"><p>The reducer takes current <code>state</code> and an <code>action</code> and returns new <code>state</code>.
Normally this bit would be called by Redux.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="6-11"><p>Define the expected shape of new <code>state</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13"><p>Perform deep equality check with <code>toEqual</code> matcher.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title"><small class="dm-slide__title__subtitle">Visual testing with Storybook</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Setup the storybook</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><code class="dm-code__editor hljs javascript">/** CONSOLE **/
npm i -g @storybook/cli

/** IN PROJECT DIRECTORY **/
getstorybook

npm run storybook
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-2"><p>Install the <code>storybook</code> command line tool</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4-5"><p>In the main project directory run the <code>getstorybook</code> command,
which will setup the storybook for current application</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="6"><p>Start the storybook app. Go to <code>http://localhost:9009/</code> to see the example storybook.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1-8"><p>The storybook loads stories defined in <code>src/stories/index.js</code> or <code>src/stories.js</code> files.
Delete to file contents to remove the default stories.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Creating a story</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">MyComponent.stories.js</strong><code class="dm-code__editor hljs javascript">/** CONSOLE **/
npm i -g @storybook/cli

/** IN PROJECT DIRECTORY **/
getstorybook

npm run storybook
</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-8"><p>By convention, the stories for given component are defined in the same directory in file called <code>COMPONENT_NAME.stories.js</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="1-3"><p>Required imports</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5"><p>Create a group of stories; should be called the same as the component under test</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="6"><p>Add a story with name and a function that returns the component with certain params</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="7"><p>Add more stories with different params</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="10-11"><p>Remember to import component stories into the main stories file</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Tasks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Unit test a reducer</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Create a smoke test for a component of your choice</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Use `enzyme` to shallow render and test a component</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Setup `storybook` and create a couple of stories for a component</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Create a snapshot test of one of the components</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Use `enzyme` to test interactions of a component (ie. responding to `onClick`</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Use `storybook` to develop a new component</div></article></div></div></div></div></section><section class="dm-slide dm-slide--title-page"><div class="dm-slide__content-wrapper"><h1 class="dm-slide-title">Using types with React<small class="dm-slide__title__subtitle">Typed Javascript with Flow</small></h1></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Installing flow</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:40%;flex-basis:40%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">console</strong><code class="dm-code__editor hljs javascript">/** CONSOLE **/
npm install --save-dev flow-bin

/** PACKAGE.JSON **/
{
    /* ... */
    &quot;scripts&quot;: {
        &quot;start&quot;: &quot;react-scripts start&quot;,
            &quot;build&quot;: &quot;react-scripts build&quot;,
            &quot;test&quot;: &quot;react-scripts test --env=jsdom&quot;,
            &quot;eject&quot;: &quot;react-scripts eject&quot;,
            &quot;flow&quot;: &quot;flow&quot;
    }
}

/** CONSOLE **/
npm run flow init

npm start

npm run flow

</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:60%;flex-basis:60%;"><div class="current-only fragment dm-code-focus" data-code-focus="1-2"><p>Install the <code>flow-bin</code> package with <code>npm</code> or <code>yarn</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12"><p>Add the <code>flow</code> script to the <code>scripts</code> section of <code>package.json</code>. Not necessary if installing via <code>yarn</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="16-17"><p>Run the initialization script with <code>flow init</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="19"><p>Start the app normally, the <code>create-react-app</code> will check the types automatically.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="21"><p>Running the <code>flow</code> script will also check types</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Types in flow</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:40%;flex-basis:40%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">console</strong><code class="dm-code__editor hljs javascript">/* @flow */

const bar: number = 2;

function foo(x: ?string): string {
    if (x) {
        return x;
    }
    return &quot;default string&quot;;
}

const arrayOfNumbers: number[] = [1, 2, 3];

interface Circle {
    position: ?{
        x: number,
        y: number
    }
    radius: number;

    area(): number;
}

const circle: Circle = {
    radius: 2,
    area() {
        return Math.PI * this.radius * this.radius;
    }
};

class Foo {
    bar() {}
}

const fooInstance: Foo = new Foo();</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:60%;flex-basis:60%;"><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>Mark the file as flow-typed with the <code>@flow</code> directive</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3"><p>Declare variable types with the <code>variableName: type</code> syntax</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5"><p>Function's arguments can be typed too</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5"><p>Optional arguments are marked with the <code>?</code> character prefixing the type</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="5"><p>Function's return type is defined after the argument list</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12"><p>Array types are defined using the <code>Type[]</code> syntax</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13-21"><p>Custom types can be defined using <code>interfaces</code>.
Interfaces exists only for typing purposes and do not appear in compiled code.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="15-18"><p>Complex types can also be defined inline.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="21"><p>Interfaces can define typing for methods as well.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="24-29"><p>Interface can be used in the same way as any other type</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="31-33"><p>Another way to define a type is to use a <code>class</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="35"><p>All instances of class <code>Foo</code> are of type <code>Foo</code>.</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Using flow with React</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:60%;flex-basis:60%;"><pre class="dm-code dm-code--view"><strong class="dm-code__filename">console</strong><code class="dm-code__editor hljs javascript">/* @flow */

const bar: number = 2;

function foo(x: ?string): string {
    if (x) {
        return x;
    }
    return &quot;default string&quot;;
}

const arrayOfNumbers: number[] = [1, 2, 3];

interface Circle {
    position: ?{
        x: number,
        y: number
    }
    radius: number;

    area(): number;
}

const circle: Circle = {
    radius: 2,
    area() {
        return Math.PI * this.radius * this.radius;
    }
};

class Foo {
    bar() {}
}

const fooInstance: Foo = new Foo();</code></pre></div><div class="dm-slide__content__column l-column-middle" style="min-width:40%;flex-basis:40%;"><div class="current-only fragment dm-code-focus" data-code-focus="1"><p>The <code>@flow</code> directive is necessary in every file</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="12-25"><p><code>state</code> and <code>props</code> are important properties to type for a React component</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="3-6"><p>Create an interface for the <code>state</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="4"><p>The <code>+</code> prefix means that the property is read-only.
The state should be considered read-only, as it is only changed via <code>setState</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="8-10"><p>Same goes for the <code>props</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="13-15"><p>Provide type and initial value for the <code>state</code>.</p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="17"><p>Provide type for the <code>props</code></p>
</div><div class="current-only fragment dm-code-focus" data-code-focus="19-21"><p>Flow will recognize that properties in <code>defaultProps</code> should be considered optional</p>
</div></div></div></div></section><section class="dm-slide dm-slide--columns"><div class="dm-slide__content-wrapper"><h3 class="dm-slide__title">Tasks</h3><div class="dm-slide__content"><div class="dm-slide__content__column" style="min-width:undefined%;flex-basis:undefined%;"><div class="l-column-fit"><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Annotate Redux reducers and actions with Flow</div></article><article class="dm-task dm-task--basic undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add Flow annotations to a component of your choice</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Add Flow annotations to sagas</div></article><article class="dm-task dm-task--optional undefined"><div class="dm-task__difficulty"></div><div class="dm-task__body">Annotate all the components</div></article></div></div></div></div></section></div></div><script type="text/javascript" src="vendor.bundle_68c677b61fa507938cd8.js"></script><script type="text/javascript" src="bundle_68c677b61fa507938cd8.js"></script></body></html>